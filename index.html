<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analisador de Fundos Imobili√°rios</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --dark-color: #2c3e50;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--light-color);
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .app-description {
            color: #666;
            margin-bottom: 20px;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            background: #f1f1f1;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            border: 1px solid #ddd;
            border-bottom: none;
        }
        
        .tab.active {
            background: white;
            font-weight: bold;
            color: var(--secondary-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .fund-info {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background-color: var(--light-color);
            border-radius: 8px;
        }
        
        .fund-info input, .fund-info select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            flex: 1;
            min-width: 200px;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border-radius: 8px;
            background-color: white;
            border-left: 5px solid var(--secondary-color);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .section-title {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            color: var(--primary-color);
        }
        
        .section-title h2 {
            margin-left: 10px;
        }
        
        .form-group {
            margin-bottom: 15px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #444;
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 8px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
        }
        
        .checkbox-item input[type="checkbox"],
        .checkbox-item input[type="radio"] {
            margin-right: 8px;
        }
        
        textarea, input[type="text"], input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-top: 5px;
        }
        
        textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        .btn-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }
        
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-save {
            background-color: var(--success-color);
            color: white;
        }
        
        .btn-save:hover {
            background-color: #219653;
        }
        
        .btn-reset {
            background-color: var(--warning-color);
            color: white;
        }
        
        .btn-reset:hover {
            background-color: #e67e22;
        }
        
        .btn-print {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .btn-print:hover {
            background-color: #2980b9;
        }
        
        .search-box {
            display: flex;
            margin-bottom: 20px;
            gap: 10px;
        }
        
        .search-box input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .search-box button {
            padding: 10px 15px;
        }
        
        .reports-list {
            margin-top: 20px;
        }
        
        .report-item {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 10px;
            background: #f9f9f9;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .report-info {
            flex: 1;
        }
        
        .report-actions {
            display: flex;
            gap: 10px;
        }
        
        .report-btn {
            padding: 8px 12px;
            font-size: 14px;
        }
        
        .storage-info {
            margin-top: 20px;
            padding: 15px;
            background: #eef7ff;
            border-radius: 5px;
            text-align: center;
        }
        
        @media print {
            button, .tabs, .search-box {
                display: none;
            }
            
            .container {
                box-shadow: none;
            }
            
            .tab-content {
                display: block !important;
            }
        }
        
        @media (max-width: 768px) {
            .fund-info {
                flex-direction: column;
            }
            
            .fund-info input, .fund-info select {
                width: 100%;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .report-item {
                flex-direction: column;
                gap: 10px;
            }
            
            .report-actions {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-chart-line"></i> Analisador de Fundos Imobili√°rios</h1>
            <p class="app-description">Checklist completo para an√°lise de relat√≥rios gerenciais - Salve e pesquise suas an√°lises</p>
        </header>
        
        <div class="tabs">
            <div class="tab active" data-tab="form">Nova An√°lise</div>
            <div class="tab" data-tab="reports">Relat√≥rios Salvos</div>
            <div class="tab" data-tab="help">Ajuda</div>
        </div>
        
        <div class="tab-content active" id="form-tab">
            <div class="fund-info">
                <input type="text" id="fund-name" placeholder="Nome do Fundo">
                <input type="text" id="analysis-date" placeholder="M√™s/Ano de Refer√™ncia (MM/AAAA)">
                <input type="text" id="analyst-name" placeholder="Nome do Analista">
            </div>
            
            <form id="checklist-form">
                <div class="section">
                    <div class="section-title">
                        <span>üè¶</span>
                        <h2>Estrutura do Fundo</h2>
                    </div>
                    
                    <div class="form-group">
                        <label>Qual a estrat√©gia/objetivo do fundo? (renda, ganho de capital, reciclagem de portf√≥lio, etc.)</label>
                        <textarea id="strategy"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Segmento principal do fundo? ‚Äì ‚ö†Ô∏è H√≠brido n√£o √© segmento</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="logistics" name="segment">
                                <label for="logistics">üì¶ Log√≠stica</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="offices" name="segment">
                                <label for="offices">üè¢ Lajes</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="shoppings" name="segment">
                                <label for="shoppings">üè¨ Shoppings</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="other-segment" name="segment">
                                <label for="other-segment">üìç Outros</label>
                            </div>
                        </div>
                        <input type="text" id="other-segment-text" placeholder="Especifique outros segmentos" style="margin-top: 10px; display: none;">
                    </div>
                    
                    <div class="form-group">
                        <label>Tipo de gest√£o:</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="active-management" name="management-type" value="ativa">
                                <label for="active-management">Ativa</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="passive-management" name="management-type" value="passiva">
                                <label for="passive-management">Passiva</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Compara√ß√£o com IFIX:</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="above-ifix" name="ifix-comparison" value="acima">
                                <label for="above-ifix">üìà Acima</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="below-ifix" name="ifix-comparison" value="abaixo">
                                <label for="below-ifix">üìâ Abaixo</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="with-ifix" name="ifix-comparison" value="junto">
                                <label for="with-ifix">‚û°Ô∏è Junto</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="section">
                    <div class="section-title">
                        <span>üí∞</span>
                        <h2>Custos do Fundo</h2>
                    </div>
                    
                    <div class="form-group">
                        <label for="admin-fee">Taxa de administra√ß√£o (% sobre PL ou receita)</label>
                        <input type="text" id="admin-fee">
                    </div>
                    
                    <div class="form-group">
                        <label for="performance-fee">Taxa de performance (% e benchmark)</label>
                        <input type="text" id="performance-fee">
                    </div>
                    
                    <div class="form-group">
                        <label for="other-fees">Outras taxas relevantes? (consultoria, escritura√ß√£o, etc.)</label>
                        <textarea id="other-fees"></textarea>
                    </div>
                </div>
                
                <div class="section">
                    <div class="section-title">
                        <span>‚úÖ</span>
                        <h2>Conclus√£o da An√°lise</h2>
                    </div>
                    
                    <div class="form-group">
                        <label for="positive-points">Pontos positivos:</label>
                        <textarea id="positive-points"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="negative-points">Pontos negativos:</label>
                        <textarea id="negative-points"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="cash-burn">Fundo est√° queimando caixa? Se sim, por qu√™?</label>
                        <textarea id="cash-burn"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="balance-sustainability">O saldo acumulado sustentar√° a distribui√ß√£o por quanto tempo?</label>
                        <input type="text" id="balance-sustainability">
                    </div>
                    
                    <div class="form-group">
                        <label for="discount">O fundo est√° descontado? Se sim, esse desconto √© justific√°vel?</label>
                        <textarea id="discount"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Expectativa para pr√≥ximos resultados:</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="expect-improve" name="expectation" value="melhora">
                                <label for="expect-improve">Melhora</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="expect-stable" name="expectation" value="estabilidade">
                                <label for="expect-stable">Estabilidade</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="expect-worse" name="expectation" value="piora">
                                <label for="expect-worse">Piora</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Recomenda√ß√£o:</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="recommend-follow" name="recommendation" value="acompanhar">
                                <label for="recommend-follow">‚úîÔ∏è Acompanhar</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="recommend-increase" name="recommendation" value="aumentar">
                                <label for="recommend-increase">‚úîÔ∏è Aumentar posi√ß√£o</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="recommend-reduce" name="recommendation" value="reduzir">
                                <label for="recommend-reduce">‚úîÔ∏è Reduzir exposi√ß√£o</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="recommend-avoid" name="recommendation" value="evitar">
                                <label for="recommend-avoid">‚úîÔ∏è Evitar</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="btn-group">
                    <button type="button" class="btn-save" id="save-btn">
                        <i class="fas fa-save"></i> Salvar An√°lise
                    </button>
                    <button type="reset" class="btn-reset">
                        <i class="fas fa-trash"></i> Limpar Formul√°rio
                    </button>
                    <button type="button" class="btn-print" id="print-btn">
                        <i class="fas fa-print"></i> Imprimir/Exportar
                    </button>
                </div>
            </form>
        </div>
        
        <div class="tab-content" id="reports-tab">
            <h2><i class="fas fa-file-alt"></i> Relat√≥rios Salvos</h2>
            <p>Encontre e gerencie suas an√°lises salvas</p>
            
            <div class="search-box">
                <input type="text" id="search-input" placeholder="Pesquisar por nome do fundo ou data...">
                <button class="btn-save" id="search-btn">
                    <i class="fas fa-search"></i> Pesquisar
                </button>
            </div>
            
            <div class="storage-info">
                <p>Espa√ßo utilizado: <span id="storage-used">0 KB</span> | 
                   Relat√≥rios salvos: <span id="reports-count">0</span></p>
                <button class="btn-reset" id="clear-all-btn">
                    <i class="fas fa-trash"></i> Limpar Todos os Relat√≥rios
                </button>
            </div>
            
            <div class="reports-list" id="reports-list">
                <!-- Os relat√≥rios ser√£o listados aqui via JavaScript -->
            </div>
        </div>
        
        <div class="tab-content" id="help-tab">
            <h2><i class="fas fa-question-circle"></i> Ajuda e Informa√ß√µes</h2>
            
            <div class="section">
                <h3>Onde os relat√≥rios s√£o salvos?</h3>
                <p>Todos os relat√≥rios s√£o salvos localmente no seu navegador usando uma tecnologia chamada <strong>LocalStorage</strong>.</p>
                <p>Isso significa que seus dados ficam armazenados apenas no seu computador e n√£o s√£o enviados para nenhum servidor.</p>
            </div>
            
            <div class="section">
                <h3>Como pesquisar relat√≥rios?</h3>
                <p>Na aba "Relat√≥rios Salvos", digite o nome do fundo ou a data no campo de pesquisa e clique no bot√£o "Pesquisar".</p>
                <p>Voc√™ tamb√©m pode visualizar, carregar ou excluir relat√≥rios individualmente usando os bot√µes ao lado de cada relat√≥rio.</p>
            </div>
            
            <div class="section">
                <h3>Como imprimir ou exportar?</h3>
                <p>Use o bot√£o "Imprimir/Exportar" para gerar uma vers√£o para impress√£o da an√°lise atual.</p>
                <p>Na visualiza√ß√£o de impress√£o, voc√™ pode salvar como PDF usando a fun√ß√£o "Salvar como PDF" do seu navegador.</p>
            </div>
            
            <div class="section">
                <h3>Os dados ser√£o perdidos se eu limpar o navegador?</h3>
                <p>Sim, como os dados s√£o armazenados localmente, se voc√™ limpar o hist√≥rico e dados de navega√ß√£o, todos os relat√≥rios ser√£o perdidos.</p>
                <p>Para evitar perda de dados, exporte e salve suas an√°lises importantes em outro local.</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elementos da interface
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const otherSegmentCheckbox = document.getElementById('other-segment');
            const otherSegmentText = document.getElementById('other-segment-text');
            const saveBtn = document.getElementById('save-btn');
            const printBtn = document.getElementById('print-btn');
            const searchBtn = document.getElementById('search-btn');
            const searchInput = document.getElementById('search-input');
            const clearAllBtn = document.getElementById('clear-all-btn');
            const reportsList = document.getElementById('reports-list');
            const storageUsed = document.getElementById('storage-used');
            const reportsCount = document.getElementById('reports-count');
            
            // Sistema de abas
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Ativar aba clicada
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Mostrar conte√∫do correspondente
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === `${tabId}-tab`) {
                            content.classList.add('active');
                        }
                    });
                    
                    // Se for a aba de relat√≥rios, atualizar a lista
                    if (tabId === 'reports') {
                        updateReportsList();
                    }
                });
            });
            
            // Mostrar campo de texto para "Outros" segmentos quando selecionado
            otherSegmentCheckbox.addEventListener('change', function() {
                otherSegmentText.style.display = this.checked ? 'block' : 'none';
            });
            
            // Preencher automaticamente a data atual no campo de data
            const today = new Date();
            const month = today.getMonth() + 1;
            const year = today.getFullYear();
            document.getElementById('analysis-date').value = `${month.toString().padStart(2, '0')}/${year}`;
            
            // Salvar dados no localStorage
            saveBtn.addEventListener('click', function() {
                const fundName = document.getElementById('fund-name').value;
                if (!fundName) {
                    alert('Por favor, informe o nome do fundo antes de salvar.');
                    return;
                }
                
                // Coletar todos os dados do formul√°rio
                const formData = {
                    fundName: fundName,
                    analysisDate: document.getElementById('analysis-date').value,
                    analystName: document.getElementById('analyst-name').value,
                    strategy: document.getElementById('strategy').value,
                    segments: getSelectedCheckboxes('segment'),
                    otherSegment: document.getElementById('other-segment-text').value,
                    managementType: getSelectedRadio('management-type'),
                    ifixComparison: getSelectedRadio('ifix-comparison'),
                    adminFee: document.getElementById('admin-fee').value,
                    performanceFee: document.getElementById('performance-fee').value,
                    otherFees: document.getElementById('other-fees').value,
                    positivePoints: document.getElementById('positive-points').value,
                    negativePoints: document.getElementById('negative-points').value,
                    cashBurn: document.getElementById('cash-burn').value,
                    balanceSustainability: document.getElementById('balance-sustainability').value,
                    discount: document.getElementById('discount').value,
                    expectation: getSelectedRadio('expectation'),
                    recommendation: getSelectedRadio('recommendation'),
                    timestamp: new Date().toISOString()
                };
                
                // Salvar no localStorage usando o nome do fundo e data como chave
                const storageKey = `fi-analysis-${fundName}-${formData.analysisDate.replace('/', '-')}`;
                localStorage.setItem(storageKey, JSON.stringify(formData));
                
                alert(`An√°lise de ${fundName} salva com sucesso!`);
                updateStorageInfo();
            });
            
            // Imprimir/exportar formul√°rio
            printBtn.addEventListener('click', function() {
                window.print();
            });
            
            // Pesquisar relat√≥rios
            searchBtn.addEventListener('click', function() {
                updateReportsList(searchInput.value);
            });
            
            // Limpar todos os relat√≥rios
            clearAllBtn.addEventListener('click', function() {
                if (confirm('Tem certeza que deseja excluir TODOS os relat√≥rios salvos? Esta a√ß√£o n√£o pode ser desfeita.')) {
                    // Encontrar e remover todas as chaves relacionadas a relat√≥rios
                    for (let i = 0; i < localStorage.length; i++) {
                        const key = localStorage.key(i);
                        if (key.startsWith('fi-analysis-')) {
                            localStorage.removeItem(key);
                        }
                    }
                    
                    alert('Todos os relat√≥rios foram exclu√≠dos.');
                    updateReportsList();
                    updateStorageInfo();
                }
            });
            
            // Fun√ß√£o para atualizar a lista de relat√≥rios
            function updateReportsList(searchTerm = '') {
                reportsList.innerHTML = '';
                let count = 0;
                
                // Percorrer todos os itens no localStorage
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    
                    if (key.startsWith('fi-analysis-')) {
                        try {
                            const report = JSON.parse(localStorage.getItem(key));
                            
                            // Verificar se corresponde ao termo de pesquisa
                            if (!searchTerm || 
                                report.fundName.toLowerCase().includes(searchTerm.toLowerCase()) || 
                                report.analysisDate.toLowerCase().includes(searchTerm.toLowerCase())) {
                                
                                const reportElement = document.createElement('div');
                                reportElement.className = 'report-item';
                                reportElement.innerHTML = `
                                    <div class="report-info">
                                        <h3>${report.fundName}</h3>
                                        <p>Data: ${report.analysisDate} | Analista: ${report.analystName || 'N√£o informado'}</p>
                                        <p>Salvo em: ${new Date(report.timestamp).toLocaleString()}</p>
                                    </div>
                                    <div class="report-actions">
                                        <button class="btn-save report-btn view-btn" data-key="${key}">
                                            <i class="fas fa-eye"></i> Ver
                                        </button>
                                        <button class="btn-print report-btn load-btn" data-key="${key}">
                                            <i class="fas fa-upload"></i> Carregar
                                        </button>
                                        <button class="btn-reset report-btn delete-btn" data-key="${key}">
                                            <i class="fas fa-trash"></i> Excluir
                                        </button>
                                    </div>
                                `;
                                
                                reportsList.appendChild(reportElement);
                                count++;
                            }
                        } catch (e) {
                            console.error('Erro ao processar relat√≥rio:', e);
                        }
                    }
                }
                
                if (count === 0) {
                    reportsList.innerHTML = '<p>Nenhum relat√≥rio encontrado.</p>';
                }
                
                // Adicionar event listeners aos bot√µes
                document.querySelectorAll('.view-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const key = this.getAttribute('data-key');
                        viewReport(key);
                    });
                });
                
                document.querySelectorAll('.load-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const key = this.getAttribute('data-key');
                        loadReport(key);
                    });
                });
                
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const key = this.getAttribute('data-key');
                        deleteReport(key);
                    });
                });
            }
            
            // Fun√ß√£o para visualizar relat√≥rio
            function viewReport(key) {
                const report = JSON.parse(localStorage.getItem(key));
                let content = `
                    <h2>Relat√≥rio: ${report.fundName}</h2>
                    <p><strong>Data:</strong> ${report.analysisDate}</p>
                    <p><strong>Analista:</strong> ${report.analystName || 'N√£o informado'}</p>
                    <p><strong>Salvo em:</strong> ${new Date(report.timestamp).toLocaleString()}</p>
                    <hr>
                    <h3>Estrat√©gia/Objetivo:</h3>
                    <p>${report.strategy || 'N√£o informado'}</p>
                    <h3>Pontos Positivos:</h3>
                    <p>${report.positivePoints || 'N√£o informado'}</p>
                    <h3>Pontos Negativos:</h3>
                    <p>${report.negativePoints || 'N√£o informado'}</p>
                `;
                
                alertify.alert('Visualizar Relat√≥rio', content);
            }
            
            // Fun√ß√£o para carregar relat√≥rio no formul√°rio
            function loadReport(key) {
                const report = JSON.parse(localStorage.getItem(key));
                
                // Preencher campos do formul√°rio
                document.getElementById('fund-name').value = report.fundName || '';
                document.getElementById('analysis-date').value = report.analysisDate || '';
                document.getElementById('analyst-name').value = report.analystName || '';
                document.getElementById('strategy').value = report.strategy || '';
                document.getElementById('admin-fee').value = report.adminFee || '';
                document.getElementById('performance-fee').value = report.performanceFee || '';
                document.getElementById('other-fees').value = report.otherFees || '';
                document.getElementById('positive-points').value = report.positivePoints || '';
                document.getElementById('negative-points').value = report.negativePoints || '';
                document.getElementById('cash-burn').value = report.cashBurn || '';
                document.getElementById('balance-sustainability').value = report.balanceSustainability || '';
                document.getElementById('discount').value = report.discount || '';
                
                // Preencher checkboxes e radios (simplificado para exemplo)
                if (report.otherSegment) {
                    document.getElementById('other-segment').checked = true;
                    document.getElementById('other-segment-text').value = report.otherSegment;
                    document.getElementById('other-segment-text').style.display = 'block';
                }
                
                // Mudar para a aba do formul√°rio
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                document.querySelector('.tab[data-tab="form"]').classList.add('active');
                document.getElementById('form-tab').classList.add('active');
                
                alert(`Relat√≥rio de ${report.fundName} carregado com sucesso!`);
            }
            
            // Fun√ß√£o para excluir relat√≥rio
            function deleteReport(key) {
                const report = JSON.parse(localStorage.getItem(key));
                
                if (confirm(`Tem certeza que deseja excluir o relat√≥rio de ${report.fundName}?`)) {
                    localStorage.removeItem(key);
                    alert('Relat√≥rio exclu√≠do com sucesso.');
                    updateReportsList();
                    updateStorageInfo();
                }
            }
            
            // Fun√ß√£o para atualizar informa√ß√µes de armazenamento
            function updateStorageInfo() {
                let totalSize = 0;
                let reportCount = 0;
                
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    if (key.startsWith('fi-analysis-')) {
                        totalSize += localStorage.getItem(key).length;
                        reportCount++;
                    }
                }
                
                storageUsed.textContent = `${(totalSize / 1024).toFixed(2)} KB`;
                reportsCount.textContent = reportCount;
            }
            
            // Fun√ß√µes auxiliares para obter valores de checkboxes e radios
            function getSelectedCheckboxes(name) {
                const checkboxes = document.querySelectorAll(`input[name="${name}"]:checked`);
                return Array.from(checkboxes).map(cb => cb.nextElementSibling.textContent);
            }
            
            function getSelectedRadio(name) {
                const radio = document.querySelector(`input[name="${name}"]:checked`);
                return radio ? radio.value : null;
            }
            
            // Inicializar informa√ß√µes de armazenamento
            updateStorageInfo();
            
            // Carregar an√°lise salva anteriormente se os par√¢metros estiverem na URL
            const urlParams = new URLSearchParams(window.location.search);
            const loadFund = urlParams.get('fund');
            const loadDate = urlParams.get('date');
            
            if (loadFund && loadDate) {
                const storageKey = `fi-analysis-${loadFund}-${loadDate.replace('/', '-')}`;
                const savedData = localStorage.getItem(storageKey);
                
                if (savedData) {
                    loadReport(storageKey);
                }
            }
        });
    </script>
    
    <!-- Alertify.js para di√°logos melhores -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
</body>
</html>
