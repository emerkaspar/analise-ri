<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checklist de An√°lise de FIIs</title>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg: #0f1724;
            --card: #0b1220;
            --muted: #9aa7b2;
            --accent: #60a5fa;
            --glass: rgba(255,255,255,0.03);
            --success: #10b981;
            --danger: #ef4444;
            --card-border: rgba(255,255,255,0.04);
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            background-color: var(--bg);
            color: white;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--card);
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--card-border);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--glass);
        }
        
        h1 {
            color: var(--accent);
            margin-bottom: 10px;
            font-size: 2.2rem;
        }
        
        .app-description {
            color: var(--muted);
            margin-bottom: 20px;
            font-size: 1.1rem;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--glass);
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            background: var(--glass);
            border-radius: 8px 8px 0 0;
            margin-right: 5px;
            border: 1px solid var(--card-border);
            border-bottom: none;
            color: var(--muted);
            transition: all 0.3s ease;
        }
        
        .tab.active {
            background: var(--card);
            font-weight: bold;
            color: var(--accent);
        }
        
        .tab:hover {
            background: rgba(96, 165, 250, 0.1);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .fund-info {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background-color: var(--glass);
            border-radius: 12px;
            border: 1px solid var(--card-border);
        }
        
        .fund-info input, .fund-info select {
            padding: 12px;
            border: 1px solid var(--card-border);
            border-radius: 8px;
            flex: 1;
            min-width: 200px;
            background: rgba(0, 0, 0, 0.2);
            color: white;
        }
        
        .fund-info input::placeholder {
            color: var(--muted);
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border-radius: 12px;
            background-color: var(--glass);
            border: 1px solid var(--card-border);
        }
        
        .section-title {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            color: var(--accent);
        }
        
        .section-title h2 {
            margin-left: 10px;
            font-size: 1.5rem;
        }
        
        .checklist-item {
            margin-bottom: 15px;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border-left: 3px solid var(--accent);
        }
        
        .checklist-item label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: white;
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 8px;
            margin-bottom: 15px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.2);
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid var(--card-border);
        }
        
        .checkbox-item input[type="checkbox"],
        .checkbox-item input[type="radio"] {
            margin-right: 8px;
        }
        
        textarea, input[type="text"], input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--card-border);
            border-radius: 8px;
            margin-top: 5px;
            background: rgba(0, 0, 0, 0.2);
            color: white;
            resize: vertical;
        }
        
        textarea {
            min-height: 80px;
        }
        
        textarea::placeholder {
            color: var(--muted);
        }
        
        .btn-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }
        
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-save {
            background-color: var(--success);
            color: white;
        }
        
        .btn-save:hover {
            background-color: #0da271;
        }
        
        .btn-reset {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-reset:hover {
            background-color: #dc2626;
        }
        
        .btn-print {
            background-color: var(--accent);
            color: white;
        }
        
        .btn-print:hover {
            background-color: #3b82f6;
        }
        
        .search-box {
            display: flex;
            margin-bottom: 20px;
            gap: 10px;
        }
        
        .search-box input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--card-border);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.2);
            color: white;
        }
        
        .search-box input::placeholder {
            color: var(--muted);
        }
        
        .search-box button {
            padding: 12px 20px;
        }
        
        .reports-list {
            margin-top: 20px;
        }
        
        .report-item {
            padding: 15px;
            border: 1px solid var(--card-border);
            border-radius: 8px;
            margin-bottom: 10px;
            background: var(--glass);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .report-info {
            flex: 1;
        }
        
        .report-info h3 {
            color: var(--accent);
            margin-bottom: 5px;
        }
        
        .report-info p {
            color: var(--muted);
            font-size: 0.9rem;
        }
        
        .report-actions {
            display: flex;
            gap: 10px;
        }
        
        .report-btn {
            padding: 8px 12px;
            font-size: 14px;
        }
        
        .storage-info {
            margin-top: 20px;
            padding: 15px;
            background: rgba(96, 165, 250, 0.1);
            border-radius: 8px;
            text-align: center;
            border: 1px solid var(--card-border);
        }
        
        .storage-info p {
            color: var(--muted);
            margin-bottom: 10px;
        }
        
        .auth-section {
            margin-bottom: 20px;
            padding: 20px;
            background-color: var(--glass);
            border-radius: 12px;
            border: 1px solid var(--card-border);
            text-align: center;
        }
        
        .auth-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .user-info {
            margin-top: 15px;
            padding: 10px;
            background: rgba(96, 165, 250, 0.1);
            border-radius: 8px;
        }
        
        .firebase-status {
            margin-top: 10px;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        
        .status-connected {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border: 1px solid var(--success);
        }
        
        .status-disconnected {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            border: 1px solid var(--danger);
        }
        
        .setup-guide {
            margin-top: 20px;
            padding: 20px;
            background: rgba(96, 165, 250, 0.1);
            border-radius: 12px;
            border: 1px solid var(--card-border);
        }
        
        .setup-guide h3 {
            color: var(--accent);
            margin-bottom: 15px;
        }
        
        .setup-steps {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .setup-steps li {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        @media print {
            button, .tabs, .search-box {
                display: none;
            }
            
            .container {
                box-shadow: none;
                border: none;
                background: white;
                color: black;
            }
            
            .tab-content {
                display: block !important;
            }
            
            .section {
                background: white;
                border: 1px solid #ddd;
            }
            
            .checklist-item {
                background: #f9f9f9;
                border-left: 3px solid #333;
            }
        }
        
        @media (max-width: 768px) {
            .fund-info {
                flex-direction: column;
            }
            
            .fund-info input, .fund-info select {
                width: 100%;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .report-item {
                flex-direction: column;
                gap: 10px;
            }
            
            .report-actions {
                width: 100%;
                justify-content: center;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                margin-bottom: 5px;
                border-radius: 8px;
                border: 1px solid var(--card-border);
            }
            
            .auth-buttons {
                flex-direction: column;
            }
        }
        
        .observations {
            margin-top: 15px;
        }
        
        .observations textarea {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--card-border);
        }
        
        .checkbox-item {
            transition: all 0.2s ease;
        }
        
        .checkbox-item:hover {
            background: rgba(96, 165, 250, 0.1);
        }
        
        .checkbox-item input[type="checkbox"]:checked,
        .checkbox-item input[type="radio"]:checked {
            accent-color: var(--accent);
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: var(--accent);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .error-message {
            background-color: rgba(239, 68, 68, 0.2);
            color: var(--danger);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid var(--danger);
        }
        
        .success-message {
            background-color: rgba(16, 185, 129, 0.2);
            color: var(--success);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid var(--success);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Checklist de An√°lise de FIIs</h1>
            <p class="app-description">An√°lise completa de fundos imobili√°rios com sistema de salvamento</p>
        </header>
        
        <!-- Se√ß√£o de Autentica√ß√£o Firebase -->
        <div class="auth-section" id="auth-section">
            <h3><i class="fas fa-user"></i> Autentica√ß√£o Firebase</h3>
            <p>Fa√ßa login para salvar suas an√°lises na nuvem</p>
            <div class="firebase-status" id="firebase-status">Verificando conex√£o...</div>
            <div id="user-info" class="user-info" style="display: none;">
                <p>Logado como: <span id="user-email"></span></p>
            </div>
            <div class="auth-buttons">
                <button id="login-btn" class="btn-save">
                    <i class="fas fa-sign-in-alt"></i> Fazer Login
                </button>
                <button id="logout-btn" class="btn-reset" style="display: none;">
                    <i class="fas fa-sign-out-alt"></i> Sair
                </button>
            </div>
        </div>
                    
        <div class="tabs">
            <div class="tab active" data-tab="form">Nova An√°lise</div>
            <div class="tab" data-tab="reports">Relat√≥rios Salvos</div>
            <div class="tab" data-tab="help">Ajuda</div>
        </div>
        
        <div class="tab-content active" id="form-tab">
            <div class="fund-info">
                <input type="text" id="fund-name" placeholder="Nome do Fundo">
                <input type="text" id="analysis-date" placeholder="M√™s/Ano de Refer√™ncia (MM/AAAA)">
                <input type="text" id="analyst-name" placeholder="Nome do Analista">
            </div>
            
            <form id="checklist-form">
                <!-- ESTRUTURA DO FUNDO -->
                <div class="section">
                    <div class="section-title">
                        <span>üè¶</span>
                        <h2>Estrutura do Fundo</h2>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Qual a estrat√©gia/objetivo do fundo? (renda, ganho de capital, reciclagem de portf√≥lio, etc.)</label>
                        <textarea id="strategy" placeholder="Descreva a estrat√©gia do fundo..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Segmento principal do fundo? ‚Äì ‚ö†Ô∏è H√≠brido n√£o √© segmento</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="logistics" name="segment">
                                <label for="logistics">üì¶ Log√≠stica</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="offices" name="segment">
                                <label for="offices">üè¢ Lajes</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="shoppings" name="segment">
                                <label for="shoppings">üè¨ Shoppings</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="other-segment" name="segment">
                                <label for="other-segment">üìç Outros</label>
                            </div>
                        </div>
                        <input type="text" id="other-segment-text" placeholder="Especifique outros segmentos" style="margin-top: 10px; display: none;">
                    </div>
                    
                    <div class="checklist-item">
                        <label>Tipo de gest√£o:</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="active-management" name="management-type" value="ativa">
                                <label for="active-management">Ativa</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="passive-management" name="management-type" value="passiva">
                                <label for="passive-management">Passiva</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Compara√ß√£o com IFIX:</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="above-ifix" name="ifix-comparison" value="acima">
                                <label for="above-ifix">üìà Acima</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="below-ifix" name="ifix-comparison" value="abaixo">
                                <label for="below-ifix">üìâ Abaixo</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="with-ifix" name="ifix-comparison" value="junto">
                                <label for="with-ifix">‚û°Ô∏è Junto</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="property-count">Quantidade de im√≥veis</label>
                        <input type="number" id="property-count" placeholder="N√∫mero de im√≥veis no portf√≥lio">
                    </div>
                    
                    <div class="checklist-item">
                        <label>Aloca√ß√£o do Fundo</label>
                        <div style="display: flex; gap: 10px; margin-top: 8px;">
                            <input type="text" id="allocation-properties" placeholder="% Im√≥veis">
                            <input type="text" id="allocation-fiis" placeholder="% FIIs">
                            <input type="text" id="allocation-cash" placeholder="% Caixa">
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <label>% de contratos</label>
                        <div style="display: flex; gap: 10px; margin-top: 8px;">
                            <input type="text" id="typical-contracts" placeholder="% T√≠picos">
                            <input type="text" id="atypical-contracts" placeholder="% At√≠picos">
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="average-contract-term">Tempo m√©dio de vencimento dos contratos (meses)</label>
                        <input type="number" id="average-contract-term" placeholder="Tempo m√©dio em meses">
                    </div>
                    
                    <div class="checklist-item">
                        <label for="expiring-contracts">H√° contratos pr√≥ximos do vencimento? Qual % da receita?</label>
                        <textarea id="expiring-contracts" placeholder="Descreva a situa√ß√£o dos contratos..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="active-tenants">Quantos inquilinos ativos</label>
                        <input type="number" id="active-tenants" placeholder="N√∫mero de inquilinos ativos">
                    </div>
                    
                    <div class="checklist-item">
                        <label for="tenant-segments">Segmentos de mercado dos inquilinos</label>
                        <textarea id="tenant-segments" placeholder="Liste os segmentos de mercado..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="largest-sector">% da carteira alocada no maior setor</label>
                        <input type="text" id="largest-sector" placeholder="Percentual do maior setor">
                    </div>
                    
                    <div class="checklist-item">
                        <label for="tenant-concentration">Concentra√ß√£o em algum inquilino? Qual e qual %?</label>
                        <textarea id="tenant-concentration" placeholder="Descreva a concentra√ß√£o..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="tenant-financials">Situa√ß√£o financeira do inquilino com maior concentra√ß√£o</label>
                        <textarea id="tenant-financials" placeholder="Descreva a situa√ß√£o financeira..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Existe inquilino em per√≠odo de car√™ncia?</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="grace-period-yes" name="grace-period" value="sim">
                                <label for="grace-period-yes">Sim</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="grace-period-no" name="grace-period" value="nao">
                                <label for="grace-period-no">N√£o</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Observa√ß√µes:</label>
                        <textarea class="observations" placeholder="Anota√ß√µes sobre a estrutura do fundo..."></textarea>
                    </div>
                </div>
                
                <!-- üîé GOVERNAN√áA E GEST√ÉO -->
                <div class="section">
                    <div class="section-title">
                        <span>üîé</span>
                        <h2>Governan√ßa e Gest√£o</h2>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="manager-history">Quem √© o gestor e qual o hist√≥rico dela no mercado?</label>
                        <textarea id="manager-history" placeholder="Descreva o gestor e seu hist√≥rico..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Existe troca de gestor ou equipe recente?</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="manager-change-yes" name="manager-change" value="sim">
                                <label for="manager-change-yes">Sim</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="manager-change-no" name="manager-change" value="nao">
                                <label for="manager-change-no">N√£o</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="manager-change-details">Se houve troca, detalhe as circunst√¢ncias:</label>
                        <textarea id="manager-change-details" placeholder="Detalhe a troca de gest√£o..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label>O fundo tem conflitos de interesse (gestor/administrador ligados a ativos/inquilinos)?</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="conflicts-yes" name="conflicts" value="sim">
                                <label for="conflicts-yes">Sim</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="conflicts-no" name="conflicts" value="nao">
                                <label for="conflicts-no">N√£o</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="conflicts-details">Se houver conflitos, detalhe:</label>
                        <textarea id="conflicts-details" placeholder="Descreva os conflitos de interesse..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Grau de transpar√™ncia dos relat√≥rios:</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="transparency-high" name="transparency" value="alta">
                                <label for="transparency-high">Alta (claros e detalhados)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="transparency-medium" name="transparency" value="media">
                                <label for="transparency-medium">M√©dia</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="transparency-low" name="transparency" value="baixa">
                                <label for="transparency-low">Baixa (superficiais)</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Observa√ß√µes:</label>
                        <textarea class="observations" placeholder="Anota√ß√µes sobre governan√ßa e gest√£o..."></textarea>
                    </div>
                </div>
                
                <!-- VAC√ÇNCIA E RECEITA -->
                <div class="section">
                    <div class="section-title">
                        <span>üìä</span>
                        <h2>Vac√¢ncia e Receita</h2>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="financial-vacancy">Vac√¢ncia financeira (%)</label>
                        <input type="text" id="financial-vacancy" placeholder="Percentual de vac√¢ncia financeira">
                    </div>
                    
                    <div class="checklist-item">
                        <label for="physical-vacancy">Vac√¢ncia f√≠sica (%)</label>
                        <input type="text" id="physical-vacancy" placeholder="Percentual de vac√¢ncia f√≠sica">
                    </div>
                    
                    <div class="checklist-item">
                        <label for="default-rate">Inadimpl√™ncia (%)</label>
                        <input type="text" id="default-rate" placeholder="Percentual de inadimpl√™ncia">
                    </div>
                    
                    <div class="checklist-item">
                        <label>Resultado superior ou inferior ao m√™s anterior?</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="result-higher" name="result-comparison" value="superior">
                                <label for="result-higher">Superior</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="result-lower" name="result-comparison" value="inferior">
                                <label for="result-lower">Inferior</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="result-same" name="result-comparison" value="igual">
                                <label for="result-same">Igual</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="result-reason">Se diferente, qual o motivo?</label>
                        <textarea id="result-reason" placeholder="Explique o motivo da varia√ß√£o..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Observa√ß√µes:</label>
                        <textarea class="observations" placeholder="Anota√ß√µes sobre vac√¢ncia and receita..."></textarea>
                    </div>
                </div>
                
                <!-- üìà DESEMPENHO COMPARATIVO -->
                <div class="section">
                    <div class="section-title">
                        <span>üìà</span>
                        <h2>Desempenho Comparativo</h2>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="vpc-evolution">Evolu√ß√£o do valor patrimonial por cota (VPC) nos √∫ltimos 12 meses</label>
                        <textarea id="vpc-evolution" placeholder="Descreva a evolu√ß√£o do VPC..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="current-vs-avg">Cota√ß√£o atual vs m√©dia dos √∫ltimos 12 meses</label>
                        <input type="text" id="current-vs-avg" placeholder="Ex: 5% acima, 10% abaixo">
                    </div>
                    
                    <div class="checklist-item">
                        <label for="yield-comparison">Rendimento atual vs m√©dia hist√≥rica (em %)</label>
                        <input type="text" id="yield-comparison" placeholder="Ex: 6.5% vs 7.2%">
                    </div>
                    
                    <div class="checklist-item">
                        <label for="sector-comparison">DY vs m√©dia do setor (log√≠stica, lajes, shopping, etc.)</label>
                        <input type="text" id="sector-comparison" placeholder="Ex: 0.5% acima da m√©dia de shoppings">
                    </div>
                    
                    <div class="checklist-item">
                        <label>Classifica√ß√£o do fundo:</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="risk-fund" name="fund-classification">
                                <label for="risk-fund">‚ö†Ô∏è Risco</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="growth-fund" name="fund-classification">
                                <label for="growth-fund">üìà Crescimento</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="anchor-fund" name="fund-classification">
                                <label for="anchor-fund">‚öì Ancoragem</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Observa√ß√µes:</label>
                        <textarea class="observations" placeholder="Anota√ß√µes sobre desempenho comparativo..."></textarea>
                    </div>
                </div>
                
                <!-- ALAVANCAGEM E ESTRUTURA DE CAPITAL -->
                <div class="section">
                    <div class="section-title">
                        <span>üí∞</span>
                        <h2>Alavancagem e Estrutura de Capital</h2>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Existe alavancagem?</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="leverage-yes" name="leverage" value="sim">
                                <label for="leverage-yes">Sim</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="leverage-no" name="leverage" value="nao">
                                <label for="leverage-no">N√£o</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="leverage-rate">Taxa m√©dia da alavancagem (%)</label>
                        <input type="text" id="leverage-rate" placeholder="Taxa m√©dia de juros">
                    </div>
                    
                    <div class="checklist-item">
                        <label for="amortization-plan">Plano de amortiza√ß√£o detalhado</label>
                        <textarea id="amortization-plan" placeholder="Descreva o plano de amortiza√ß√£o..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Observa√ß√µes:</label>
                        <textarea class="observations" placeholder="Anota√ß√µes sobre alavancagem..."></textarea>
                    </div>
                </div>
                
                <!-- LIQUIDEZ E MERCADO -->
                <div class="section">
                    <div class="section-title">
                        <span>üìà</span>
                        <h2>Liquidez e Mercado</h2>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Liquidez: estabilizada, crescente ou decrescente?</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="liquidity-stable" name="liquidity" value="estavel">
                                <label for="liquidity-stable">Estabilizada</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="liquidity-increasing" name="liquidity" value="crescente">
                                <label for="liquidity-increasing">Crescente</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="liquidity-decreasing" name="liquidity" value="decrescente">
                                <label for="liquidity-decreasing">Decrescente</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="important-notices">Comunicados importantes no per√≠odo (aquisi√ß√µes, vendas, novos contratos, problemas com inquilinos)</label>
                        <textarea id="important-notices" placeholder="Liste os comunicados importantes..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Observa√ß√µes:</label>
                        <textarea class="observations" placeholder="Anota√ß√µes sobre liquidez e mercado..."></textarea>
                    </div>
                </div>
                
                <!-- AVALIA√á√ÉO DE RISCO E OPORTUNIDADE -->
                <div class="section">
                    <div class="section-title">
                        <span>‚öñÔ∏è</span>
                        <h2>Avalia√ß√£o de Risco e Oportunidade</h2>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Risco: baixo / m√©dio / alto?</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="risk-low" name="risk-level" value="baixo">
                                <label for="risk-low">Baixo</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="risk-medium" name="risk-level" value="medio">
                                <label for="risk-medium">M√©dio</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="risk-high" name="risk-level" value="alto">
                                <label for="risk-high">Alto</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="main-risks">Principais riscos elencados (ex.: concentra√ß√£o, vac√¢ncia, endividamento, setor espec√≠fico)</label>
                        <textarea id="main-risks" placeholder="Liste os principais riscos..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="opportunities">Existem oportunidades claras? (ex.: nova ancoragem, desconto de mercado, potencial de crescimento)</label>
                        <textarea id="opportunities" placeholder="Descreva as oportunidades..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label>O fundo apresenta ancoragem s√≥lida?</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="anchor-yes" name="anchor" value="sim">
                                <label for="anchor-yes">Sim</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="anchor-no" name="anchor" value="nao">
                                <label for="anchor-no">N√£o</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="anchor-partial" name="anchor" value="parcial">
                                <label for="anchor-partial">Parcialmente</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Observa√ß√µes:</label>
                        <textarea class="observations" placeholder="Anota√ß√µes sobre risco e oportunidade..."></textarea>
                    </div>
                </div>
                
                <!-- CONCLUS√ÉO -->
                <div class="section">
                    <div class="section-title">
                        <span>‚úÖ</span>
                        <h2>Conclus√£o da An√°lise</h2>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="positive-points">Pontos positivos:</label>
                        <textarea id="positive-points" placeholder="Liste os pontos positivos..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="negative-points">Pontos negativos:</label>
                        <textarea id="negative-points" placeholder="Liste os pontos negativos..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="cash-burn">Fundo est√° queimando caixa? Se sim, por qu√™?</label>
                        <textarea id="cash-burn" placeholder="Descreva a situa√ß√£o de caixa..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label for="balance-sustainability">O saldo acumulado sustentar√° a distribui√ß√£o por quanto tempo?</label>
                        <input type="text" id="balance-sustainability" placeholder="Ex: 12 meses">
                    </div>
                    
                    <div class="checklist-item">
                        <label for="discount">O fundo est√° descontado? Se sim, esse desconto √© justific√°vel?</label>
                        <textarea id="discount" placeholder="Analise o desconto..."></textarea>
                    </div>
                    
                    <div class="checklist-item">
                        <label>Expectativa para pr√≥ximos resultados:</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="radio" id="expect-improve" name="expectation" value="melhora">
                                <label for="expect-improve">Melhora</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="expect-stable" name="expectation" value="estabilidade">
                                <label for="expect-stable">Estabilidade</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="radio" id="expect-worse" name="expectation" value="piora">
                                <label for="expect-worse">Piora</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class='checklist-item'>
                        <label>Recomenda√ß√£o:</label>
                        <div class='checkbox-group'>
                            <div class='checkbox-item'>
                                <input type='radio' id='recommend-follow' name='recommendation' value='acompanhar'>
                                <label for='recommend-follow'>‚úîÔ∏è Acompanhar</label>
                            </div>
                            <div class='checkbox-item'>
                                <input type='radio' id='recommend-increase' name='recommendation' value='aumentar'>
                                <label for='recommend-increase'>‚úîÔ∏è Aumentar posi√ß√£o</label>
                            </div>
                            <div class='checkbox-item'>
                                <input type='radio' id='recommend-reduce' name='recommendation' value='reduzir'>
                                <label for='recommend-reduce'>‚úîÔ∏è Reduzir exposi√ß√£o</label>
                            </div>
                            <div class='checkbox-item'>
                                <input type='radio' id='recommend-avoid' name='recommendation' value='evitar'>
                                <label for='recommend-avoid'>‚úîÔ∏è Evitar</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class='checklist-item'>
                        <label>Observa√ß√µes finais:</label>
                        <textarea class='observations' placeholder='Considera√ß√µes finais...'></textarea>
                    </div>
                </div>
                
                <div class='btn-group'>
                    <button type='button' class='btn-save' id='save-btn'>
                        <i class='fas fa-save'></i> Salvar An√°lise
                    </button>
                    <button type='reset' class='btn-reset'>
                        <i class='fas fa-trash'></i> Limpar Formul√°rio
                    </button>
                    <button type='button' class='btn-print' id='print-btn'>
                        <i class='fas fa-print'></i> Imprimir/Exportar
                    </button>
                </div>
            </form>
        </div>
        
        <div class='tab-content' id='reports-tab'>
            <h2><i class='fas fa-file-alt'></i> Relat√≥rios Salvos</h2>
            <p>Encontre e gerencie suas an√°lises salvas</p>
            
            <div class='search-box'>
                <input type='text' id='search-input' placeholder='Pesquisar por nome do fundo ou data...'>
                <button class='btn-save' id='search-btn'>
                    <i class='fas fa-search'></i> Pesquisar
                </button>
            </div>
            
            <div id="reports-message"></div>
            
            <div class='storage-info'>
                <p>Relat√≥rios salvos: <span id='reports-count'>0</span></p>
                <button class='btn-reset' id='clear-all-btn'>
                    <i class='fas fa-trash'></i> Limpar Todos os Relat√≥rios
                </button>
            </div>
            
            <div class='reports-list' id='reports-list'>
                <!-- Os relat√≥rios ser√£o listados aqui via JavaScript -->
            </div>
        </div>
        
        <div class='tab-content' id='help-tab'>
            <h2><i class='fas fa-question-circle'></i> Ajuda e Informa√ß√µes</h2>
            
            <div class='section'>
                <h3>Onde os relat√≥rios s√£o salvos?</h3>
                <p>Todos os relat√≥rios s√£o salvos na nuvem usando <strong>Firebase</strong>.</p>
                <p>Isso significa que voc√™ pode acessar suas an√°lises de qualquer dispositivo ap√≥s fazer login.</p>
            </div>
            
            <div class='section'>
                <h3>Como pesquisar relat√≥rios?</h3>
                <p>Na aba "Relat√≥rios Salvos", digite o nome do fundo ou a data no campo de pesquisa –∏ clique no bot√£o "Pesquisar".</p>
                <p>Voc√™ tamb√©m pode visualizar, carregar ou excluir relat√≥rios individualmente usando os bot√µes ao lado de cada relat√≥rio.</p>
            </div>
            
            <div class='section'>
                <h3>Como imprimir ou exportar?</h3>
                <p>Use o bot√£o "Imprimir/Exportar" para gerar uma vers√£o para impress√£o da an√°lise atual.</p>
                <p>Na visualiza√ß√£o de impress√£o, voc√™ can save as PDF usando a fun√ß√£o "Salvar como PDF" do seu navegador.</p>
            </div>
            
            <div class='section'>
                <h3>Os dados ser√£o perdidos se eu limpar o navegador?</h3>
                <p>N√£o, pois os dados s√£o salvos na nuvem. Se voc√™ limpar o hist√≥rico e dados de navega√ß√£o, basta fazer login novamente para recuperar suas an√°lises.</p>
            </div>
            
            <div class='section'>
                <h3>Como configurar o Firebase?</h3>
                <p>Para usar a autentica√ß√£o com Google, voc√™ precisa configurar seu projeto Firebase:</p>
                <ol>
                    <li>Acesse o <a href='https://console.firebase.google.com/' target='_blank'>Console do Firebase</a></li>
                    <li>Selecione seu projeto "rianalise"</li>
                    <li>V√° em "Authentication" > "Sign-in method"</li>
                    <li>Habilite o provedor "Google"</li>
                    <li>Adicione seu dom√≠nio em "Authorized domains" (localhost, 127.0.0.1, etc.)</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Configura√ß√£o do Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyDCplzRR5imGdGCpr6PnKEwo2rs5qPrV6c",
                authDomain: "rianalise.firebaseapp.com",
                projectId: "rianalise",
                storageBucket: "rianalise.firebasestorage.app",
                messagingSenderId: "46433102386",
                appId: "1:46433102386:web:918bfbc2f0834604daaa2b",
                measurementId: "G-ZQ2178VY8N"
            };

            // Inicializar Firebase
            let db = null;
            let auth = null;
            let isFirebaseInitialized = false;
            
            try {
                // Verificar se o Firebase j√° foi inicializado
                if (!firebase.apps.length) {
                    firebase.initializeApp(firebaseConfig);
                }
                
                db = firebase.firestore();
                auth = firebase.auth();
                isFirebaseInitialized = true;
                
                // Atualizar status
                document.getElementById('firebase-status').textContent = "Firebase inicializado com sucesso";
                document.getElementById('firebase-status').className = "firebase-status status-connected";
                
                console.log("Firebase inicializado com sucesso");
            } catch (error) {
                console.error("Erro ao inicializar Firebase:", error);
                document.getElementById('firebase-status').textContent = "Erro ao inicializar Firebase: " + error.message;
                document.getElementById('firebase-status').className = "firebase-status status-disconnected";
            }
            
            // Elementos da interface
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const otherSegmentCheckbox = document.getElementById('other-segment');
            const otherSegmentText = document.getElementById('other-segment-text');
            const saveBtn = document.getElementById('save-btn');
            const printBtn = document.getElementById('print-btn');
            const searchBtn = document.getElementById('search-btn');
            const searchInput = document.getElementById('search-input');
            const clearAllBtn = document.getElementById('clear-all-btn');
            const reportsList = document.getElementById('reports-list');
            const reportsCount = document.getElementById('reports-count');
            const loginBtn = document.getElementById('login-btn');
            const logoutBtn = document.getElementById('logout-btn');
            const userInfo = document.getElementById('user-info');
            const userEmail = document.getElementById('user-email');
            const firebaseStatus = document.getElementById('firebase-status');
            const reportsMessage = document.getElementById('reports-message');
            
            // Estado da aplica√ß√£o
            let currentUser = null;
            
            // Monitorar estado de autentica√ß√£o se o Firebase foi inicializado
            if (isFirebaseInitialized) {
                auth.onAuthStateChanged((user) => {
                    if (user) {
                        currentUser = user;
                        userEmail.textContent = user.email;
                        userInfo.style.display = 'block';
                        loginBtn.style.display = 'none';
                        logoutBtn.style.display = 'block';
                        console.log("Usu√°rio logado:", user.email);
                        
                        // Atualizar lista de relat√≥rios se estiver na aba correta
                        if (document.querySelector('.tab.active').getAttribute('data-tab') === 'reports') {
                            updateReportsList();
                        }
                    } else {
                        currentUser = null;
                        userInfo.style.display = 'none';
                        loginBtn.style.display = 'block';
                        logoutBtn.style.display = 'none';
                        console.log("Usu√°rio n√£o logado");
                        
                        // Limpar lista de relat√≥rios se n√£o estiver logado
                        if (document.querySelector('.tab.active').getAttribute('data-tab') === 'reports') {
                            reportsList.innerHTML = '<p>Fa√ßa login para ver seus relat√≥rios salvos.</p>';
                        }
                    }
                });
            } else {
                firebaseStatus.textContent = "Firebase n√£o inicializado. Verifique a configura√ß√£o.";
                firebaseStatus.className = "firebase-status status-disconnected";
            }
            
            // Login com Google
            loginBtn.addEventListener('click', () => {
                if (!isFirebaseInitialized) {
                    alert("Firebase n√£o inicializado. Verifique sua conex√£o com a internet.");
                    return;
                }
                
                const provider = new firebase.auth.GoogleAuthProvider();
                auth.signInWithPopup(provider)
                    .then((result) => {
                        console.log("Login bem-sucedido:", result.user);
                    })
                    .catch((error) => {
                        console.error("Erro no login:", error);
                        if (error.code === 'auth/unauthorized-domain') {
                            alert("Erro: Dom√≠nio n√£o autorizado. Voc√™ precisa configurar seu dom√≠nio no Console do Firebase. Veja as instru√ß√µes na se√ß√£o de configura√ß√£o.");
                        } else {
                            alert("Erro ao fazer login: " + error.message);
                        }
                    });
            });
            
            // Logout
            logoutBtn.addEventListener('click', () => {
                if (isFirebaseInitialized) {
                    auth.signOut()
                        .then(() => {
                            console.log("Logout bem-sucedido");
                        })
                        .catch((error) => {
                            console.error("Erro no logout:", error);
                        });
                }
            });
            
            // Sistema de abas
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Ativar aba clicada
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Mostrar conte√∫do correspondente
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === `${tabId}-tab`) {
                            content.classList.add('active');
                        }
                    });
                    
                    // Se for a aba de relat√≥rios, atualizar a lista
                    if (tabId === 'reports') {
                        updateReportsList();
                    }
                });
            });
            
            // Mostrar campo de texto para "Outros" segmentos quando selecionado
            otherSegmentCheckbox.addEventListener('change', function() {
                otherSegmentText.style.display = this.checked ? 'block' : 'none';
            });
            
            // Preencher automaticamente a data atual no campo de data
            const today = new Date();
            const month = today.getMonth() + 1;
            const year = today.getFullYear();
            document.getElementById('analysis-date').value = `${month.toString().padStart(2, '0')}/${year}`;
            
            // Salvar dados no Firebase
            saveBtn.addEventListener('click', function() {
                if (!isFirebaseInitialized) {
                    alert('Firebase n√£o est√° inicializado. Verifique sua conex√£o e tente novamente.');
                    return;
                }
                
                if (!currentUser) {
                    alert('Fa√ßa login para salvar suas an√°lises na nuvem.');
                    return;
                }
                
                const fundName = document.getElementById('fund-name').value;
                if (!fundName) {
                    alert('Por favor, informe o nome do fundo antes de salvar.');
                    return;
                }
                
                // Coletar todos os dados do formul√°rio
                const formData = {
                    fundName: fundName,
                    analysisDate: document.getElementById('analysis-date').value,
                    analystName: document.getElementById('analyst-name').value,
                    strategy: document.getElementById('strategy').value,
                    segments: getSelectedCheckboxes('segment'),
                    otherSegment: document.getElementById('other-segment-text').value,
                    managementType: getSelectedRadio('management-type'),
                    ifixComparison: getSelectedRadio('ifix-comparison'),
                    propertyCount: document.getElementById('property-count').value,
                    allocationProperties: document.getElementById('allocation-properties').value,
                    allocationFiis: document.getElementById('allocation-fiis').value,
                    allocationCash: document.getElementById('allocation-cash').value,
                    typicalContracts: document.getElementById('typical-contracts').value,
                    atypicalContracts: document.getElementById('atypical-contracts').value,
                    averageContractTerm: document.getElementById('average-contract-term').value,
                    expiringContracts: document.getElementById('expiring-contracts').value,
                    activeTenants: document.getElementById('active-tenants').value,
                    tenantSegments: document.getElementById('tenant-segments').value,
                    largestSector: document.getElementById('largest-sector').value,
                    tenantConcentration: document.getElementById('tenant-concentration').value,
                    tenantFinancials: document.getElementById('tenant-financials').value,
                    gracePeriod: getSelectedRadio('grace-period'),
                    managerHistory: document.getElementById('manager-history').value,
                    managerChange: getSelectedRadio('manager-change'),
                    managerChangeDetails: document.getElementById('manager-change-details').value,
                    conflicts: getSelectedRadio('conflicts'),
                    conflictsDetails: document.getElementById('conflicts-details').value,
                    transparency: getSelectedRadio('transparency'),
                    vpcEvolution: document.getElementById('vpc-evolution').value,
                    currentVsAvg: document.getElementById('current-vs-avg').value,
                    yieldComparison: document.getElementById('yield-comparison').value,
                    sectorComparison: document.getElementById('sector-comparison').value,
                    fundClassification: getSelectedCheckboxes('fund-classification'),
                    financialVacancy: document.getElementById('financial-vacancy').value,
                    physicalVacancy: document.getElementById('physical-vacancy').value,
                    defaultRate: document.getElementById('default-rate').value,
                    resultComparison: getSelectedRadio('result-comparison'),
                    resultReason: document.getElementById('result-reason').value,
                    leverage: getSelectedRadio('leverage'),
                    leverageRate: document.getElementById('leverage-rate').value,
                    amortizationPlan: document.getElementById('amortization-plan').value,
                    liquidity: getSelectedRadio('liquidity'),
                    importantNotices: document.getElementById('important-notices').value,
                    riskLevel: getSelectedRadio('risk-level'),
                    mainRisks: document.getElementById('main-risks').value,
                    opportunities: document.getElementById('opportunities').value,
                    anchor: getSelectedRadio('anchor'),
                    positivePoints: document.getElementById('positive-points').value,
                    negativePoints: document.getElementById('negative-points').value,
                    cashBurn: document.getElementById('cash-burn').value,
                    balanceSustainability: document.getElementById('balance-sustainability').value,
                    discount: document.getElementById('discount').value,
                    expectation: getSelectedRadio('expectation'),
                    recommendation: getSelectedRadio('recommendation'),
                    timestamp: new Date().toISOString()
                };
                
                // Salvar no Firebase
                const firebaseData = {
                    ...formData,
                    userId: currentUser.uid,
                    userEmail: currentUser.email,
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                };
                
                // Mostrar indicador de carregamento
                const originalText = saveBtn.innerHTML;
                saveBtn.innerHTML = '<span class="loading"></span> Salvando...';
                saveBtn.disabled = true;
                
                db.collection('analises').add(firebaseData)
                    .then((docRef) => {
                        console.log("An√°lise salva no Firebase com ID: ", docRef.id);
                        saveBtn.innerHTML = originalText;
                        saveBtn.disabled = false;
                        alert(`An√°lise de ${fundName} salva com sucesso na nuvem!`);
                    })
                    .catch((error) => {
                        console.error("Erro ao salvar no Firebase: ", error);
                        saveBtn.innerHTML = originalText;
                        saveBtn.disabled = false;
                        alert(`Erro ao salvar na nuvem: ${error.message}`);
                    });
            });
            
            // Imprimir/exportar formul√°rio
            printBtn.addEventListener('click', function() {
                window.print();
            });
            
            // Pesquisar relat√≥rios
            searchBtn.addEventListener('click', function() {
                updateReportsList(searchInput.value);
            });
            
            // Limpar todos os relat√≥rios
            clearAllBtn.addEventListener('click', function() {
                if (confirm('Tem certeza que deseja excluir TODOS os relat√≥rios salvos? Esta a√ß√£o n√£o pode ser desfeita.')) {
                    // Esta fun√ß√£o precisaria ser implementada para deletar todos os documentos do usu√°rio
                    alert('Funcionalidade de limpar todos os relat√≥rios ainda n√£o implementada.');
                }
            });
            
            // Fun√ß√£o para atualizar a lista de relat√≥rios do Firebase
            async function updateReportsList(searchTerm = '') {
                reportsList.innerHTML = '<p><span class="loading"></span> Carregando relat√≥rios...</p>';
                reportsMessage.innerHTML = '';
                
                // Se n√£o estiver logado, n√£o buscar relat√≥rios
                if (!currentUser) {
                    reportsList.innerHTML = '<p>Fa√ßa login para ver seus relat√≥rios salvos na nuvem.</p>';
                    return;
                }
                
                if (!isFirebaseInitialized) {
                    reportsList.innerHTML = '<p>Firebase n√£o inicializado. N√£o √© poss√≠vel carregar relat√≥rios.</p>';
                    return;
                }
                
                let reports = [];
                
                try {
                    let query = db.collection('analises')
                        .where('userId', '==', currentUser.uid)
                        .orderBy('lastUpdated', 'desc');
                    
                    const querySnapshot = await query.get();
                    
                    if (querySnapshot.empty) {
                        reportsList.innerHTML = '<p>Nenhum relat√≥rio encontrado na nuvem.</p>';
                        reportsMessage.innerHTML = '<div class="success-message">Nenhum relat√≥rio salvo ainda. Crie uma an√°lise na aba "Nova An√°lise" para come√ßar.</div>';
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const data = doc.data();
                        reports.push({...data, id: doc.id});
                    });
                    
                    // Filtrar por termo de pesquisa se fornecido
                    if (searchTerm) {
                        reports = reports.filter(report => 
                            report.fundName.toLowerCase().includes(searchTerm.toLowerCase()) || 
                            report.analysisDate.toLowerCase().includes(searchTerm.toLowerCase())
                        );
                    }
                    
                    // Exibir os relat√≥rios
                    reportsList.innerHTML = '';
                    
                    if (reports.length === 0) {
                        reportsList.innerHTML = '<p>Nenhum relat√≥rio encontrado com os crit√©rios de pesquisa.</p>';
                        return;
                    }
                    
                    reportsCount.textContent = reports.length;
                    
                    reports.forEach(report => {
                        const reportElement = document.createElement('div');
                        reportElement.className = 'report-item';
                        reportElement.innerHTML = `
                            <div class="report-info">
                                <h3>${report.fundName}</h3>
                                <p>Data: ${report.analysisDate} | Analista: ${report.analystName || 'N√£o informado'}</p>
                                <p>Salvo em: ${new Date(report.timestamp).toLocaleString()}</p>
                            </div>
                            <div class="report-actions">
                                <button class="btn-save report-btn view-btn" data-id="${report.id}">
                                    <i class="fas fa-eye"></i> Ver
                                </button>
                                <button class="btn-print report-btn load-btn" data-id="${report.id}">
                                    <i class="fas fa-upload"></i> Carregar
                                </button>
                                <button class="btn-reset report-btn delete-btn" data-id="${report.id}">
                                    <i class="fas fa-trash"></i> Excluir
                                </button>
                            </div>
                        `;
                        
                        reportsList.appendChild(reportElement);
                    });
                    
                    // Adicionar event listeners aos bot√µes
                    document.querySelectorAll('.view-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const id = this.getAttribute('data-id');
                            viewReport(id);
                        });
                    });
                    
                    document.querySelectorAll('.load-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const id = this.getAttribute('data-id');
                            loadReport(id);
                        });
                    });
                    
                    document.querySelectorAll('.delete-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const id = this.getAttribute('data-id');
                            deleteReport(id);
                        });
                    });
                    
                } catch (error) {
                    console.error("Erro ao buscar relat√≥rios do Firebase:", error);
                    reportsList.innerHTML = '<p>Erro ao carregar relat√≥rios do Firebase.</p>';
                    reportsMessage.innerHTML = `<div class="error-message">Erro ao carregar relat√≥rios: ${error.message}. Verifique sua conex√£o com a internet e tente novamente.</div>`;
                }
            }
            
            // Fun√ß√£o para visualizar relat√≥rio
            async function viewReport(id) {
                try {
                    const doc = await db.collection('analises').doc(id).get();
                    if (doc.exists) {
                        const report = doc.data();
                        let content = `
                            <h2>Relat√≥rio: ${report.fundName}</h2>
                            <p><strong>Data:</strong> ${report.analysisDate}</p>
                            <p><strong>Analista:</strong> ${report.analystName || 'N√£o informado'}</p>
                            <p><strong>Salvo em:</strong> ${new Date(report.timestamp).toLocaleString()}</p>
                            <hr>
                            <h3>Estrat√©gia/Objetivo:</h3>
                            <p>${report.strategy || 'N√£o informado'}</p>
                            <h3>Pontos Positivos:</h3>
                            <p>${report.positivePoints || 'N√£o informado'}</p>
                            <h3>Pontos Negativos:</h3>
                            <p>${report.negativePoints || 'N√£o informado'}</p>
                        `;
                        
                        alert(content);
                    } else {
                        alert('Relat√≥rio n√£o encontrado.');
                    }
                } catch (error) {
                    console.error('Erro ao buscar relat√≥rio:', error);
                    alert('Erro ao buscar relat√≥rio: ' + error.message);
                }
            }
            
            // Fun√ß√£o para carregar relat√≥rio no formul√°rio
            async function loadReport(id) {
                try {
                    const doc = await db.collection('analises').doc(id).get();
                    if (doc.exists) {
                        const report = doc.data();
                        
                        // Preencher campos do formul√°rio
                        document.getElementById('fund-name').value = report.fundName || '';
                        document.getElementById('analysis-date').value = report.analysisDate || '';
                        document.getElementById('analyst-name').value = report.analystName || '';
                        document.getElementById('strategy').value = report.strategy || '';
                        document.getElementById('property-count').value = report.propertyCount || '';
                        document.getElementById('allocation-properties').value = report.allocationProperties || '';
                        document.getElementById('allocation-fiis').value = report.allocationFiis || '';
                        document.getElementById('allocation-cash').value = report.allocationCash || '';
                        document.getElementById('typical-contracts').value = report.typicalContracts || '';
                        document.getElementById('atypical-contracts').value = report.atypicalContracts || '';
                        document.getElementById('average-contract-term').value = report.averageContractTerm || '';
                        document.getElementById('expiring-contracts').value = report.expiringContracts || '';
                        document.getElementById('active-tenants').value = report.activeTenants || '';
                        document.getElementById('tenant-segments').value = report.tenantSegments || '';
                        document.getElementById('largest-sector').value = report.largestSector || '';
                        document.getElementById('tenant-concentration').value = report.tenantConcentration || '';
                        document.getElementById('tenant-financials').value = report.tenantFinancials || '';
                        document.getElementById('manager-history').value = report.managerHistory || '';
                        document.getElementById('manager-change-details').value = report.managerChangeDetails || '';
                        document.getElementById('conflicts-details').value = report.conflictsDetails || '';
                        document.getElementById('vpc-evolution').value = report.vpcEvolution || '';
                        document.getElementById('current-vs-avg').value = report.currentVsAvg || '';
                        document.getElementById('yield-comparison').value = report.yieldComparison || '';
                        document.getElementById('sector-comparison').value = report.sectorComparison || '';
                        document.getElementById('financial-vacancy').value = report.financialVacancy || '';
                        document.getElementById('physical-vacancy').value = report.physicalVacancy || '';
                        document.getElementById('default-rate').value = report.defaultRate || '';
                        document.getElementById('result-reason').value = report.resultReason || '';
                        document.getElementById('leverage-rate').value = report.leverageRate || '';
                        document.getElementById('amortization-plan').value = report.amortizationPlan || '';
                        document.getElementById('important-notices').value = report.importantNotices || '';
                        document.getElementById('main-risks').value = report.mainRisks || '';
                        document.getElementById('opportunities').value = report.opportunities || '';
                        document.getElementById('positive-points').value = report.positivePoints || '';
                        document.getElementById('negative-points').value = report.negativePoints || '';
                        document.getElementById('cash-burn').value = report.cashBurn || '';
                        document.getElementById('balance-sustainability').value = report.balanceSustainability || '';
                        document.getElementById('discount').value = report.discount || '';
                        
                        // Preencher checkboxes e radios
                        if (report.otherSegment) {
                            document.getElementById('other-segment').checked = true;
                            document.getElementById('other-segment-text').value = report.otherSegment;
                            document.getElementById('other-segment-text').style.display = 'block';
                        }
                        
                        // Selecionar op√ß√µes de r√°dio
                        selectRadioOption('management-type', report.managementType);
                        selectRadioOption('ifix-comparison', report.ifixComparison);
                        selectRadioOption('grace-period', report.gracePeriod);
                        selectRadioOption('manager-change', report.managerChange);
                        selectRadioOption('conflicts', report.conflicts);
                        selectRadioOption('transparency', report.transparency);
                        selectRadioOption('result-comparison', report.resultComparison);
                        selectRadioOption('leverage', report.leverage);
                        selectRadioOption('liquidity', report.liquidity);
                        selectRadioOption('risk-level', report.riskLevel);
                        selectRadioOption('anchor', report.anchor);
                        selectRadioOption('expectation', report.expectation);
                        selectRadioOption('recommendation', report.recommendation);
                        
                        // Selecionar classifica√ß√µes do fundo
                        if (report.fundClassification) {
                            document.querySelectorAll('input[name="fund-classification"]').forEach(cb => {
                                cb.checked = report.fundClassification.includes(cb.nextElementSibling.textContent);
                            });
                        }
                        
                        // Mudar para a aba do formul√°rio
                        tabs.forEach(t => t.classList.remove('active'));
                        tabContents.forEach(c => c.classList.remove('active'));
                        document.querySelector('.tab[data-tab="form"]').classList.add('active');
                        document.getElementById('form-tab').classList.add('active');
                        
                        alert(`Relat√≥rio de ${report.fundName} carregado com sucesso!`);
                    } else {
                        alert('Relat√≥rio n√£o encontrado.');
                    }
                } catch (error) {
                    console.error('Erro ao carregar relat√≥rio:', error);
                    alert('Erro ao carregar relat√≥rio: ' + error.message);
                }
            }
            
            // Fun√ß√£o auxiliar para selecionar op√ß√£o de r√°dio
            function selectRadioOption(name, value) {
                if (!value) return;
                const radio = document.querySelector(`input[name="${name}"][value="${value}"]`);
                if (radio) radio.checked = true;
            }
            
            // Fun√ß√£o para excluir relat√≥rio
            async function deleteReport(id) {
                try {
                    const doc = await db.collection('analises').doc(id).get();
                    if (doc.exists) {
                        const reportName = doc.data().fundName;
                        
                        if (confirm(`Tem certeza que deseja excluir o relat√≥rio de ${reportName}?`)) {
                            await db.collection('analises').doc(id).delete();
                            alert('Relat√≥rio exclu√≠do com sucesso.');
                            updateReportsList();
                        }
                    } else {
                        alert('Relat√≥rio n√£o encontrado.');
                    }
                } catch (error) {
                    console.error('Erro ao excluir relat√≥rio:', error);
                    alert('Erro ao excluir relat√≥rio: ' + error.message);
                }
            }
            
            // Fun√ß√µes auxiliares para obter valores de checkboxes e radios
            function getSelectedCheckboxes(name) {
                const checkboxes = document.querySelectorAll(`input[name="${name}"]:checked`);
                return Array.from(checkboxes).map(cb => cb.nextElementSibling.textContent);
            }
            
            function getSelectedRadio(name) {
                const radio = document.querySelector(`input[name="${name}"]:checked`);
                return radio ? radio.value : null;
            }
        });
    </script>
</body>
</html>